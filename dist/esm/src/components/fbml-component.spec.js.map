{"version":3,"file":"fbml-component.spec.js","sourceRoot":"","sources":["../../../../src/components/fbml-component.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import { FBMLAttribute, FBMLComponent, FBMLInstanceMethod } from './fbml-component';\r\nimport { Component, ElementRef, Renderer2, DebugElement } from '@angular/core';\r\nimport { async, ComponentFixture, TestBed } from '@angular/core/testing';\r\n\r\n@Component({\r\n  template: ''\r\n})\r\nclass FBTestComponent extends FBMLComponent {\r\n\r\n  _instance = {\r\n    testMethod: () => 'success',\r\n    testMethodWithArgs: (...args: any[]) => args.length\r\n  };\r\n\r\n  @FBMLAttribute\r\n  testAttr: string;\r\n\r\n  constructor(el: ElementRef, rnd: Renderer2) {\r\n    super(el, rnd, 'fb-test');\r\n  }\r\n\r\n  @FBMLInstanceMethod\r\n  testMethod(): string { return; }\r\n\r\n  @FBMLInstanceMethod\r\n  testMethodWithArgs(arg1: string, arg2: string): number { return; }\r\n\r\n}\r\n\r\ndescribe('FBMLComponent', () => {\r\n\r\n  beforeEach(async(() => {\r\n    TestBed.configureTestingModule({\r\n      declarations: [ FBTestComponent ]\r\n    }).compileComponents();\r\n  }));\r\n\r\n  it('should create an element with class fb-test', () => {\r\n\r\n    const instance = TestBed.createComponent(FBTestComponent);\r\n    instance.detectChanges();\r\n    expect(instance.componentInstance).toBeDefined();\r\n    expect(Object.keys(instance.debugElement.classes)).toContain('fb-test');\r\n\r\n  });\r\n\r\n});\r\n\r\ndescribe('FBMLAttribute', () => {\r\n\r\n  let de: DebugElement,\r\n    comp: FBTestComponent,\r\n    fixture: ComponentFixture<FBTestComponent>;\r\n\r\n  beforeEach(async(() => {\r\n    TestBed.configureTestingModule({\r\n      declarations: [ FBTestComponent ]\r\n    }).compileComponents();\r\n  }));\r\n\r\n  beforeEach(() => {\r\n    fixture = TestBed.createComponent(FBTestComponent);\r\n    comp = fixture.componentInstance;\r\n    de = fixture.debugElement;\r\n  });\r\n\r\n  it('should add data-test-attr attribute to element', () => {\r\n    comp.testAttr = 'test-val';\r\n    fixture.detectChanges();\r\n    expect(Object.keys(de.attributes)).toContain('data-test-attr');\r\n    expect(de.attributes['data-test-attr']).toEqual('test-val');\r\n    // should return value we set before\r\n    expect(comp.testAttr).toEqual('test-val');\r\n  });\r\n\r\n});\r\n\r\ndescribe('FBMLInstanceMethod', () => {\r\n\r\n  let de: DebugElement,\r\n    comp: FBTestComponent,\r\n    fixture: ComponentFixture<FBTestComponent>;\r\n\r\n  beforeEach(async(() => {\r\n    TestBed.configureTestingModule({\r\n      declarations: [ FBTestComponent ]\r\n    }).compileComponents();\r\n  }));\r\n\r\n  beforeEach(() => {\r\n    fixture = TestBed.createComponent(FBTestComponent);\r\n    comp = fixture.componentInstance;\r\n    de = fixture.debugElement;\r\n  });\r\n\r\n  it('should do basic call to instance method', () => {\r\n    spyOn(comp._instance, 'testMethod').and.callThrough();\r\n    const res = comp.testMethod();\r\n    expect(comp._instance.testMethod).toHaveBeenCalled();\r\n    expect(res).toEqual('success');\r\n  });\r\n\r\n  it('should do call with args to instance method', () => {\r\n    spyOn(comp._instance, 'testMethodWithArgs').and.callThrough();\r\n    const res = comp.testMethodWithArgs('hello', 'world');\r\n    expect(comp._instance.testMethodWithArgs).toHaveBeenCalledWith('hello', 'world');\r\n    expect(res).toEqual(2);\r\n  });\r\n\r\n});\r\n"]}